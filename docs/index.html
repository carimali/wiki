<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>wiki.CARIcare</title>
  <link rel="icon" href="_media/favicon.ico">
  <meta name="google-site-verification" content="6t0LoIeFksrjF4c9sqUEsVXiQNxLp2hgoqo0KryT-sE" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="keywords" content="doc,docs,documentation,gitbook,creator,generator,github,jekyll,github-pages">
  <meta name="description" content="A magical documentation generator.">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css" title="vue">
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/dark.css" title="dark" disabled>
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/buble.css" title="buble" disabled>
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/pure.css" title="pure" disabled>
  <script src="//unpkg.com/docsify-plugin-codefund/index.js"></script>

  <link rel="apple-touch-icon" sizes="180x180" href="_media/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="_media/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="_media/favicon/favicon-16x16.png">
  <link rel="manifest" href="_media/favicon/site.webmanifest">
  <link rel="mask-icon" href="_media/favicon/safari-pinned-tab.svg" color="#053852">
  <meta name="msapplication-TileColor" content="#053852">
  <meta name="theme-color" content="#ffffff">

  <style>
    /* ------------------------
       ASPETTO GENERALE NAVBAR
    ------------------------- */
    nav.app-nav {
      background: transparent !important;
      box-shadow: none !important;
      border-bottom: none !important;
      position: relative;
      z-index: 1000;
    }

    nav.app-nav li ul {
      min-width: 100px;
    }

    .cover-main img {
      width: 100px;
    }

    section.cover {
      display: none !important;
      /* Disattiva schermata "Getting Started" */
    }

    section.cover h1 {
      line-height: 0;
      margin: 50px 0;
    }

    .cover .anchor span {
      color: white;
    }

    .anchor small {
      color: #a8b9c2;
      margin-left: 5px;
    }

    .content .anchor {
      text-decoration-color: #053752;
    }

    /* ------------------------
       MENU LATERALE BLU
       (sotto barra blu, con scroll interno)
    ------------------------- */
    .sidebar {
      position: fixed !important;
      top: 70px !important;
      /* sotto la barra blu */
      bottom: 0;
      background-color: #053752 !important;
      color: #ffffff !important;
      z-index: 950 !important;
      /* sotto la barra blu */
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      /* scroll interno al menu */
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .sidebar a {
      color: #ffffff !important;
    }

    .sidebar a:hover,
    .sidebar li.active>a {
      color: #00b7ff !important;
    }

    .sidebar ul li {
      border-bottom: none !important;
    }

    .sidebar .app-name {
      display: none !important;
    }

    /* ------------------------
       SEARCH NEL MENU LATERALE
    ------------------------- */
    .sidebar .search {
      order: -1;
      position: sticky;
      top: 0;
      padding: 10px 15px 5px;
      background-color: #053752;
      border-bottom: 1px solid rgba(255, 255, 255, 0.15);
      z-index: 951;
    }

    .sidebar .search .input-wrap {
      background-color: #03293c;
      border-radius: 4px;
      padding: 4px 8px;
    }

    .sidebar .search .input-wrap input {
      width: 100%;
      background: transparent;
      border: none;
      outline: none;
      color: #ffffff;
      font-size: 14px;
    }

    .sidebar .search .input-wrap input::placeholder {
      color: #a8b9c2;
    }

    .sidebar .search .results-panel {
      background-color: #053752;
      color: #ffffff;
      border-top: 1px solid rgba(255, 255, 255, 0.15);
    }


    /* ------------------------
       SFONDO BARRA BLU
    ------------------------- */
    .top-bar-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 70px;
      background-color: #053752;
      z-index: 900;
      pointer-events: none;
    }

    /* ------------------------
       BARRA SUPERIORE: TITOLO + MENU
    ------------------------- */
    .top-bar-title {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 70px;
      z-index: 1100;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }

    .top-bar-title .logo-link {
      pointer-events: auto;
      color: #ffffff;
      font-size: 24px;
      text-decoration: none;
      font-weight: 500;
      letter-spacing: 0.5px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      text-decoration: none;
      color: white;
    }


    /* ------------------------
       BOTTONE MENU
    ------------------------- */
    #custom-menu-toggle {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      border: none;
      background: transparent;
      cursor: pointer;
      pointer-events: auto;
      z-index: 1200;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    #custom-menu-toggle span {
      width: 24px;
      height: 2px;
      background-color: #ffffff;
      border-radius: 2px;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }

    #custom-menu-toggle.active span:nth-child(1) {
      transform: translateY(8px) rotate(45deg);
    }

    #custom-menu-toggle.active span:nth-child(2) {
      opacity: 0;
    }

    #custom-menu-toggle.active span:nth-child(3) {
      transform: translateY(-8px) rotate(-45deg);
    }

    #custom-menu-toggle:not(.active) span:nth-child(1),
    #custom-menu-toggle:not(.active) span:nth-child(3) {
      transform: none;
    }

    #custom-menu-toggle:not(.active) span:nth-child(2) {
      opacity: 1;
    }

    /* ------------------------
       BANDIERE (navbar Docsify)
       (quelle originali di Docsify, spostate a sinistra
       per non sovrapporsi all'icona uscita)
    ------------------------- */
    .app-nav a,
    .app-nav a:visited,
    .app-nav a:focus,
    .app-nav a:hover,
    .app-nav a:active {
      border: none !important;
      box-shadow: none !important;
      text-decoration: none !important;
      outline: none !important;
      background: none !important;
    }

    .app-nav ul {
      display: flex;
      gap: 0.10rem;
      list-style: none;
      margin: 0;
      padding: 0;
      position: fixed;
      top: 15px;
      right: 90px; /* spostate a sinistra per lasciare spazio all'icona uscita */
      z-index: 1200;
    }

    .app-nav li {
      margin: 0;
      padding: 0;
    }

    .app-nav a {
      display: block;
      line-height: 0;
    }

    .app-nav li img {
      height: 40px;
      width: 40px;
      border-radius: 50%;
      display: block;
      transition: opacity 0.25s ease, filter 0.25s ease, transform 0.25s ease;
      transform: scale(1);
      margin: 0;
    }

    .app-nav a.active[lang="en"] img {
      opacity: 0.3;
      filter: grayscale(100%) brightness(0.7);
      transform: scale(0.95);
    }

    .app-nav a:not(.active)[lang="it"] img {
      opacity: 1;
      filter: none;
      transform: scale(1.06);
    }

    /* ------------------------
       SFONDO + SPAZIO SOTTO BARRA
    ------------------------- */
    body {
      margin: 0;
      background-color: #ffffff;
    }

    #app {
      padding-top: 100px;
    }

    /* Nasconde il pulsante standard del menu Docsify in basso a sinistra */
    .sidebar-toggle {
      display: none !important;
    }

    .logo-caricare {
      display: block;
    }

    /* (overlay custom non più usato, ma innocuo se lasciato) */
    .menu-overlay {
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      z-index: 940;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    /* Nasconde il logo su dispositivi mobili
       + fix bandiere / menu lingua in mobile
    */
    @media screen and (max-width: 768px) {
      .logo-caricare {
        display: none;
      }

      /* Mantiene le bandiere (Docsify) in alto,
         ma un po' a sinistra per fare spazio all'icona uscita */
      .app-nav ul {
        position: fixed;
        top: 22px;
        right: 50px;
        gap: 0rem;
      }

      .app-nav li img {
        width: 28px;
        height: 28px;
        border-radius: 50%;
      }

      /* forza la visibilità della navbar originale in mobile */
      nav.app-nav {
        display: block !important;
      }

      /* Nasconde l’eventuale copia del menu lingua dentro la sidebar */
      .sidebar nav.app-nav,
      .sidebar .app-nav {
        display: none !important;
      }
    }

    @media only screen and (max-width: 768px) {

      #app,
      main,
      .content {
        padding-top: 30px !important;
        /* Spazio extra per evitare che il titolo venga coperto */
      }
    }

    /* ------------------------
       LANGUAGE SWITCHER CUSTOM (icone lingua + icona uscita)
    ------------------------- */
    .language-switcher {
      position: fixed;
      top: 15px;
      right: 20px;
      z-index: 1300;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .language-switcher .flag-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: block;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      cursor: pointer;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .language-switcher .flag-btn:hover {
      transform: scale(1.08);
      opacity: 0.9;
    }

    .language-switcher .flag-it {
      background-image: url('_media/it.png');
    }

    .language-switcher .flag-en {
      background-image: url('_media/en.png');
    }

    /* Pulsante uscita / ritorno a CARIcare */
    .language-switcher .exit-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid #ffffff;
      cursor: pointer;
      text-decoration: none;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .language-switcher .exit-btn:hover {
      transform: scale(1.08);
      opacity: 0.9;
    }

    .language-switcher .exit-btn svg {
      width: 18px;
      height: 18px;
    }

    @media screen and (max-width: 768px) {
      .language-switcher {
        top: 22px;
        right: 16px;
      }

      .language-switcher .flag-btn {
        width: 28px;
        height: 28px;
      }

      .language-switcher .exit-btn {
        width: 28px;
        height: 28px;
      }

      .language-switcher .exit-btn svg {
        width: 14px;
        height: 14px;
      }
    }
  </style>
</head>

<body>
  <!-- Sfondo blu della barra -->
  <div class="top-bar-bg"></div>

  <div class="top-bar-title">
    <button id="custom-menu-toggle" aria-label="Menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <a href="#/" class="logo-link">
      <span>Wiki</span>
      <img class="logo-caricare" src="_media/icon.svg" width="30px" alt="CARIcare icon" />
      <span>CARIcare</span>
    </a>
  </div>

  <!-- LANGUAGE SWITCHER INLINE + USCITA -->
  <div class="language-switcher">
    <!-- Italiano (contenuti su /docs-en/) -->
    <a href="javascript:void(0)"
      class="flag-btn flag-it"
      onclick="(function(){
        var h = window.location.hash || '#/';

        // Se sei già in italiano (/docs-en/), non fare nulla
        if (h.indexOf('/docs-en/') !== -1) {
          return;
        }

        // Se sei in inglese (/docs-it/), passa alla stessa pagina in italiano
        if (h.indexOf('/docs-it/') !== -1) {
          window.location.hash = h.replace('/docs-it/', '/docs-en/');
        } else {
          // Se non c'è ancora prefisso lingua, vai alla home italiana
          window.location.hash = '#/docs-en/';
        }
      })(); return false;">
    </a>

    <!-- Inglese (contenuti su /docs-it/) -->
    <a href="javascript:void(0)"
      class="flag-btn flag-en"
      onclick="(function(){
        var h = window.location.hash || '#/';

        // Se sei già in inglese (/docs-it/), non fare nulla
        if (h.indexOf('/docs-it/') !== -1) {
          return;
        }

        // Se sei in italiano (/docs-en/), passa alla stessa pagina in inglese
        if (h.indexOf('/docs-en/') !== -1) {
          window.location.hash = h.replace('/docs-en/', '/docs-it/');
        } else {
          // Se non c'è ancora prefisso lingua, vai alla home inglese
          window.location.hash = '#/docs-it/';
        }
      })(); return false;">
    </a>

    <!-- Uscita verso CARIcare (porta + freccia verso destra) -->
    <a href="https://caricare.carimali.com/" class="exit-btn" title="Torna alla dashboard CARIcare">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- Porta a destra -->
        <path d="M14 3H19C19.55 3 20 3.45 20 4V20C20 20.55 19.55 21 19 21H14V3Z"
          stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <!-- Freccia che esce verso destra -->
        <path d="M4 12H13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M9 8L13 12L9 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </a>
  </div>

  <!-- Overlay custom (non necessario, ma lasciato inerte) -->
  <div class="menu-overlay" id="menu-overlay"></div>

  <div id="app">Loading ...</div>

  <script>
    // ------------------------
    // COSTANTI LINGUA
    // ------------------------
    const DEFAULT_LANG = 'en';
    const SUPPORTED_LANGS = ['en', 'it', 'zh-cn', 'de-de', 'ru', 'es'];

    // ------------------------
    // AGGIORNA HREF E STATO ATTIVO DELLE BANDIERE (navbar Docsify)
    // ------------------------
    function updateFlagLinks() {
      let hash = window.location.hash || '#/';
      // rimuove "#/" iniziale
      let path = hash.replace(/^#\//, '').replace(/\/+$/, '');
      let segments = path ? path.split('/') : [];

      // lingua corrente
      let currentLang = DEFAULT_LANG;
      if (segments[0] && SUPPORTED_LANGS.includes(segments[0])) {
        currentLang = segments[0];
        segments.shift(); // path logico senza prefisso lingua
      }

      const flagLinks = document.querySelectorAll('.app-nav a[lang]');
      if (!flagLinks.length) return;

      flagLinks.forEach(a => {
        const lang = a.getAttribute('lang') || DEFAULT_LANG;
        let newSegments = segments.slice();

        if (lang !== DEFAULT_LANG) {
          newSegments.unshift(lang);
        }

        let newHash;
        if (newSegments.length === 0) {
          // home
          newHash = (lang === DEFAULT_LANG) ? '#/' : '#/' + newSegments.join('/');
        } else {
          newHash = '#/' + newSegments.join('/');
        }

        a.setAttribute('href', newHash);
        a.classList.toggle('active', lang === currentLang);
      });
    }

    // ------------------------
    // CONFIGURAZIONE DOCSIFY + PLUGIN
    // ------------------------
    window.$docsify = {
      alias: {
        '.*?/awesome': 'https://raw.githubusercontent.com/docsifyjs/awesome-docsify/master/README.md',
        '.*?/changelog': 'https://raw.githubusercontent.com/docsifyjs/docsify/master/CHANGELOG.md',
        '/.*/_navbar.md': '/_navbar.md',
        '/it/(.*)': 'docs-it/$1',
        '/zh-cn/(.*)': 'docs-zh/$1',
        '/de-de/(.*)': 'docs-de/$1',
        '/ru/(.*)': 'docs-ru/$1',
        '/es/(.*)': 'docs-es/$1'
      },
      auto2top: true,
      coverpage: false,
      executeScript: true,
      loadSidebar: true,
      loadNavbar: true,
      mergeNavbar: false,
      maxLevel: 4,
      subMaxLevel: 2,
      ga: 'XXX',
      name: 'CARIcare',
      search: {
        noData: {
          '/de-de/': 'Keine Ergebnisse!',
          '/zh-cn/': '没有结果!',
          '/': 'No results!'
        },
        paths: 'auto',
        placeholder: {
          '/de-de/': 'Suche',
          '/zh-cn/': '搜索',
          '/': 'Search'
        }
      },
      formatUpdated: '{MM}/{DD} {HH}:{mm}',
      plugins: [
        function (hook, vm) {
          hook.doneEach(function () {
            updateFlagLinks();
          });
        }
      ]
    };

    // ------------------------
    // BOTTONE MENU CUSTOM
    // Proxy verso il toggle nativo di Docsify
    // ------------------------
    function initCustomMenuToggle() {
      const customBtn = document.getElementById('custom-menu-toggle');
      if (!customBtn) return;

      function getSidebarToggle() {
        return document.querySelector('.sidebar-toggle');
      }

      // Sincronizza la grafica dell'icona con lo stato reale del menu
      function syncIconWithState() {
        const body = document.body;
        const hasClose = body.classList.contains('close');
        const width = window.innerWidth;
        let isOpen;

        if (width < 768) {
          // MOBILE: per un bug storico di Docsify,
          // la classe "close" indica in realtà menu APERTO
          isOpen = hasClose;
        } else {
          // DESKTOP/TABLET: "close" indica menu CHIUSO
          isOpen = !hasClose;
        }

        // icona X (active) quando il menu è aperto
        customBtn.classList.toggle('active', isOpen);
      }

      customBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        const original = getSidebarToggle();
        if (!original) return;

        // delega l'apertura/chiusura al comportamento standard di Docsify
        original.click();

        // aggiorna l'icona dopo che Docsify ha cambiato la classe "close"
        setTimeout(syncIconWithState, 0);
      });

      window.addEventListener('resize', syncIconWithState);
      window.addEventListener('hashchange', syncIconWithState);

      // dopo il load Docsify ha creato .sidebar-toggle e impostato lo stato iniziale
      window.addEventListener('load', function () {
        setTimeout(syncIconWithState, 0);
      });
    }

    document.addEventListener('DOMContentLoaded', initCustomMenuToggle);
  </script>

  <script src="//unpkg.com/docsify/lib/docsify.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/search.min.js"></script>
  <script src="//unpkg.com/docsify/lib/plugins/ga.min.js"></script>
  <script src="//unpkg.com/prismjs/components/prism-bash.min.js"></script>
  <script src="//unpkg.com/prismjs/components/prism-markdown.min.js"></script>
  <script src="//unpkg.com/prismjs/components/prism-nginx.min.js"></script>

</body>

</html>
